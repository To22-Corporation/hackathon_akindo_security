# 🔒 SecurityWise - Tokyo Web3 Hackathon 2022

[Live demo is here !!](URL "https://hackathon-akindo-security.vercel.app/result")

# 🚀 プロダクト概要

スマコン監査民主化ツール  
「SecurityWise」

【プロダクト概要】  
"web3をやり始めたが、Scam被害が多くて、正直怖い"  
といったweb3ユーザーのセキュリティの悩みを解決するサービス  

【サービスの特徴】  
・各チェーン毎にトークンの脆弱性のリスクを簡単に分析できる  
・リスクの所在、判断根拠の詳細も透明化されており、自身のリテラシー向上にも繋がる  
・Chrome拡張機能も備えており、スマコン署名時に怪しいものはブロックできる  

【技術詳細】  
①独自でリスト化しているSCAM報告されているトークンとそれ以外のトークンに分別  
② SCAM リスト上に該当しないトークンに関しては、以下の 3 種類の方法でチェック  
②-1. テストの実行  
hardhat と chai を用いて、コントラクト自体の動作に問題がないかをチェック  
②-2. 関数名の確認  
ERC20 規格との比較を行い、コントラクト独自で実装されている関数のチェック  
②-3. トランザクション・トークンの確認  
過去のトランザクションや発行されたトークンの大部分が特定の個人に集中していないかを確認し、スコアリング   

# 🎬 ピッチ＆デモ

# 💬 課題

-現状スマコンの信頼性を証明(audit)するにはスマコン監査会社に依頼するのが主流であるが、監査会社を使う場合は一定の投資が必要であり、DeFi などの大規模プロジェクトはともかく草コインの発行の場合使われていないことも多い

- 即ち、監査会社に audit されていない小規模プロジェクトにおいては、コントラクトを自分で読めるようなリテラシーの高い人しかスマコンの脆弱性を検知できないのが現状である
  - 事例として、過去に Scam として話題になった[BADGE Token](https://bscscan.com/address/0x09c5a4ef1629789f2f003f1e66cac2becc9897d4)はコントラクト上で transfer 関数がオーバーライドされており、転送不可になっていた。小室さんはコントラクト読めたから回避できたが、読めない人は爆死。折角オープンソースなのに。。。
- マスアダプションを目指すためにはリテラシーが高い人のみがスマコンの脆弱性を検知できる状態というのはよくない
  - 今後色々な dApp が増え、ユーザが増えるほどこの問題は大きくなっていく

# 💡 解決方法

- 利用するスマコンの脆弱性を誰でも簡易的に確認できるサービス
  - 以下の２段階+２種類の方法を組み合わせ安全性を評価する
    - 1 段目）コントラクトが Verify されているかどうか
      - ２段目）Verify しているものに関しては
        - 規格の確認：ベースとなる ERC 規格に対し、関数の中に不審な追加関数やオーバーライドが無いかの確認
        - 自動テスト：コントラクト自体を自動テストにかける
        - 余力があればトランザクション数、過去に利用したウォレットアドレスの数なども検査基準とする
  - 現状、低レイヤー（該当 web サイト自体の危険性、従来の）での脆弱性検知ツールは存在するので、我々は高レイヤー（関数など）の脆弱性を検知するところを狙う

# 💻 Devlopment

## 🛠Tech stacks

Frontend: Next.js, Typescript  
Backend: Node.js, Hardhat, etherscan, oklink, flashbots, web3.js

## ⛓Blockchain

Ehtereum, BNB Smart Chain, Polygon

## ⚡️Technical details

コントラクトアドレスとチェーンの情報から、以下の流れで検査を行います。  
現在は ERC20 規格のトークンのみ検査が可能です。

① 我々は各チェーンで SCAM と報告されているコントラクトアドレスをリスト化しており、そこに含まれているアドレスではないかを確認します。  
リストでは現在 7000 個程度のコントラクトアドレスを管理しています。

② SCAM リスト上に該当しないトークンに関しては、以下の 3 種類の方法でチェックを行います。  
※Etherscan 上で Verify されているコントラクトのみ検査可能です。

②-1. テストの実行  
コントラクト自体の動作に問題がないかをチェックするため、hardhat と chai を用いてコントラクトの動作確認を行います。  
テストには 15 個の項目があり、通過した数で採点がなされます。  
また、どのテストを通過したかを確認可能です。

②-2. 関数名の確認  
ERC20 規格との比較を行い、コントラクト独自で実装されている関数のチェックを行います。  
また、独自で実装されている関数の中に怪しいものがないか、スキャムでよく使われている関数がないかをチェックします。  
関数自体の評価はこの項目ではできませんが、Solidity が読めない人にとっても注意すべき関数はあるか、ある場合、それはどれなのかを絞ることができます。

②-3. トランザクション・トークンの確認
過去のトランザクションや発行されたトークンの大部分が特定の個人に集中していないかを確認し、スコアリングを行います。

# 🌈 FutureWork

・ ERC721 規格への対応
・ 他のチェーンへの対応
・ 監査依頼機能の追加

```shell
npm install
node index.js
curl -w '\n' 'http://localhost:3000/erc20Test' --data "contractAddress=XXXXXX&network=bsc/eth/polygon" -XPOST

```
